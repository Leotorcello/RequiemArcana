<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carta del Día</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: url('background.jpg') no-repeat center center fixed;
            background-size: cover;
            text-align: center;
            padding: 20px;
            color: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
        }
        .carta-container {
            max-width: 90%;
            background: rgba(255, 255, 255, 0.9);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        .video-container {
            width: 100%;
            margin: 15px 0;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        /* Formato horizontal (16:9) para Arcanos Mayores */
        .video-container.horizontal {
            aspect-ratio: 16/9;
        }
        /* Formato vertical (9:16) para Shorts */
        .video-container.vertical {
            aspect-ratio: 9/16;
            max-width: 300px;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <div class="carta-container">
        <h1 id="carta-titulo">Cargando...</h1>
        <div id="video-container" class="video-container"></div>
        <div id="carta-mensaje" class="mensaje"></div>
    </div>

    <script>
        // Lista de Arcanos Mayores (formato 16:9)
        const arcanosMayores = [
            "El Loco", "El Mago", "La Sacerdotisa", "La Emperatriz", 
            "El Emperador", "El Hierofante", "Los Enamorados", "El Carro", 
            "La Justicia", "El Ermitaño", "La Rueda de la Fortuna", "La Fuerza", 
            "El Colgado", "La Muerte", "La Templanza", "El Diablo", 
            "La Torre", "La Estrella", "La Luna", "El Sol", 
            "El Juicio", "El Mundo"
        ];

        fetch('data.json')
            .then(response => response.json())
            .then(data => {
                const urlParams = new URLSearchParams(window.location.search);
                const nombreCarta = urlParams.get('carta') || "El Loco";
                const carta = data.find(item => item.Carta === nombreCarta);

                if (carta) {
                    document.getElementById('carta-titulo').textContent = carta.Carta;
                    document.getElementById('carta-mensaje').textContent = carta['Mensaje del día'];

                    const videoContainer = document.getElementById('video-container');
                    const iframe = document.createElement('iframe');
                    iframe.allowfullscreen = true;

                    // Define el formato según el tipo de carta
                    if (arcanosMayores.includes(carta.Carta)) {
                        videoContainer.className = 'video-container horizontal';
                        iframe.src = `${carta.Animation_URL}?autoplay=1&mute=1&controls=0&modestbranding=1`;
                    } else {
                        videoContainer.className = 'video-container vertical';
                        iframe.src = `${carta.Animation_URL}?autoplay=1&mute=1&playsinline=1`;
                    }

                    videoContainer.appendChild(iframe);
                }
            });
    </script>
</body>
</html>